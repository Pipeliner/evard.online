
<html>
<head>

  <meta http-equiv="Content-Type" content="text/html; charset=US-ASCII" />
  <title>mon-flags.h</title>

  <link rel="stylesheet" href="../style.css"/>
  <script src="../jquery-3.2.1.min.js"></script>
</head>
<body>

<pre><code class = "cpp">
<a name="ln1">#pragma once</a>
<a name="ln2"> </a>
<a name="ln3">#define BIT(x) ((uint64_t)1&lt;&lt;(x))</a>
<a name="ln4"> </a>
<a name="ln5">/// Properties of the monster class (other than resists/vulnerabilities).</a>
<a name="ln6">enum monclass_flag_type : uint64_t</a>
<a name="ln7">{</a>
<a name="ln8">    M_NO_FLAGS = 0,</a>
<a name="ln9"> </a>
<a name="ln10">    /// monster eats doors</a>
<a name="ln11">    M_EAT_DOORS         = BIT(0),</a>
<a name="ln12"> </a>
<a name="ln13">    /// monster crashes through doors rather than opening</a>
<a name="ln14">    M_CRASH_DOORS       = BIT(1),</a>
<a name="ln15"> </a>
<a name="ln16">    /// monster flies all the time</a>
<a name="ln17">    M_FLIES             = BIT(2),</a>
<a name="ln18"> </a>
<a name="ln19">    /// monster is skilled fighter</a>
<a name="ln20">    M_FIGHTER           = BIT(3),</a>
<a name="ln21"> </a>
<a name="ln22">    /// do not give (unique) a wand</a>
<a name="ln23">    M_NO_WAND           = BIT(4),</a>
<a name="ln24"> </a>
<a name="ln25">    /// do not give a high tier wand</a>
<a name="ln26">    M_NO_HT_WAND        = BIT(5),</a>
<a name="ln27"> </a>
<a name="ln28">    /// is created invis</a>
<a name="ln29">    M_INVIS             = BIT(6),</a>
<a name="ln30"> </a>
<a name="ln31">    /// can see invis</a>
<a name="ln32">    M_SEE_INVIS         = BIT(7),</a>
<a name="ln33"> </a>
<a name="ln34">    /// can't be blinded</a>
<a name="ln35">    M_UNBLINDABLE       = BIT(8),</a>
<a name="ln36"> </a>
<a name="ln37">    /// uses talking code</a>
<a name="ln38">    M_SPEAKS            = BIT(9),</a>
<a name="ln39"> </a>
<a name="ln40">    /// monster is perma-confused,</a>
<a name="ln41">    M_CONFUSED          = BIT(10),</a>
<a name="ln42"> </a>
<a name="ln43">    /// monster is batty</a>
<a name="ln44">    M_BATTY             = BIT(11),</a>
<a name="ln45"> </a>
<a name="ln46">    /// monster can split</a>
<a name="ln47">    M_SPLITS            = BIT(12),</a>
<a name="ln48"> </a>
<a name="ln49">                        //BIT(13), // was M_GLOWS</a>
<a name="ln50"> </a>
<a name="ln51">    /// monster is stationary</a>
<a name="ln52">    M_STATIONARY        = BIT(14),</a>
<a name="ln53"> </a>
<a name="ln54">    /// monster can smell blood</a>
<a name="ln55">    M_BLOOD_SCENT       = BIT(15),</a>
<a name="ln56"> </a>
<a name="ln57">    /// susceptible to cold; drainable by vampires, splashes blood when hit</a>
<a name="ln58">    M_COLD_BLOOD        = BIT(16),</a>
<a name="ln59"> </a>
<a name="ln60">    /// drainable by vampires, splashes blood when hit</a>
<a name="ln61">    M_WARM_BLOOD        = BIT(17),</a>
<a name="ln62"> </a>
<a name="ln63">    /// uses the 'ghost demon' struct to track stats varying per individual monster</a>
<a name="ln64">    M_GHOST_DEMON       = BIT(18),</a>
<a name="ln65"> </a>
<a name="ln66">    /// monster digs through rock</a>
<a name="ln67">    M_BURROWS           = BIT(19),</a>
<a name="ln68"> </a>
<a name="ln69">    /// monster can submerge</a>
<a name="ln70">    M_SUBMERGES         = BIT(20),</a>
<a name="ln71"> </a>
<a name="ln72">    /// monster is a unique</a>
<a name="ln73">    M_UNIQUE            = BIT(21),</a>
<a name="ln74"> </a>
<a name="ln75">    /// Passive acid splash when hit.</a>
<a name="ln76">    M_ACID_SPLASH       = BIT(22),</a>
<a name="ln77"> </a>
<a name="ln78">    /// gets various archery boosts</a>
<a name="ln79">    M_ARCHER            = BIT(23),</a>
<a name="ln80"> </a>
<a name="ln81">    /// is insubstantial</a>
<a name="ln82">    M_INSUBSTANTIAL     = BIT(24),</a>
<a name="ln83"> </a>
<a name="ln84">    /// wields two weapons at once</a>
<a name="ln85">    M_TWO_WEAPONS       = BIT(25),</a>
<a name="ln86"> </a>
<a name="ln87">    /// has extra-fast regeneration</a>
<a name="ln88">    M_FAST_REGEN        = BIT(26),</a>
<a name="ln89"> </a>
<a name="ln90">    /// cannot regenerate</a>
<a name="ln91">    M_NO_REGEN          = BIT(27),</a>
<a name="ln92"> </a>
<a name="ln93">    /// uses male pronouns</a>
<a name="ln94">    M_MALE              = BIT(28),</a>
<a name="ln95"> </a>
<a name="ln96">    /// uses female pronouns</a>
<a name="ln97">    M_FEMALE            = BIT(29),</a>
<a name="ln98"> </a>
<a name="ln99">    /// boneless corpses</a>
<a name="ln100">    M_NO_SKELETON       = BIT(30),</a>
<a name="ln101"> </a>
<a name="ln102">    /// worth 0 xp</a>
<a name="ln103">    M_NO_EXP_GAIN       = BIT(31),</a>
<a name="ln104"> </a>
<a name="ln105">    /// can do damage when attacked in melee</a>
<a name="ln106">    M_SPINY             = BIT(32),</a>
<a name="ln107"> </a>
<a name="ln108">                        //BIT(33),</a>
<a name="ln109"> </a>
<a name="ln110">    /// not a valid polymorph target (but can be polymorphed)</a>
<a name="ln111">    M_NO_POLY_TO        = BIT(34),</a>
<a name="ln112"> </a>
<a name="ln113">    /// An ancestor granted by Hepliaklqana</a>
<a name="ln114">    M_ANCESTOR          = BIT(35),</a>
<a name="ln115"> </a>
<a name="ln116">                        //BIT(36), // was M_ALWAYS_CORPSE</a>
<a name="ln117"> </a>
<a name="ln118">    /// prefer ranged attacks over melee</a>
<a name="ln119">    M_PREFER_RANGED     = BIT(37),</a>
<a name="ln120"> </a>
<a name="ln121">                        //BIT(38), // was M_ARTIFICIAL</a>
<a name="ln122"> </a>
<a name="ln123">    /// can survive without breathing; immune to asphyxiation and Mephitic Cloud</a>
<a name="ln124">    M_UNBREATHING       = BIT(39),</a>
<a name="ln125"> </a>
<a name="ln126">    /// not fully coded; causes a warning</a>
<a name="ln127">    M_UNFINISHED        = BIT(40),</a>
<a name="ln128"> </a>
<a name="ln129">    M_HERD              = BIT(41),</a>
<a name="ln130"> </a>
<a name="ln131">    // has a double-sized tile</a>
<a name="ln132">    M_TALL_TILE         = BIT(42),</a>
<a name="ln133"> </a>
<a name="ln134">    /// can sense vibrations in web traps</a>
<a name="ln135">    M_WEB_SENSE         = BIT(43),</a>
<a name="ln136"> </a>
<a name="ln137">    /// tries to maintain LOS/2 range from its target</a>
<a name="ln138">    M_MAINTAIN_RANGE    = BIT(44),</a>
<a name="ln139"> </a>
<a name="ln140">    /// flesh is not usable for making zombies</a>
<a name="ln141">    M_NO_ZOMBIE         = BIT(45),</a>
<a name="ln142"> </a>
<a name="ln143">    /// cannot be placed by any means, even in the arena, etc.</a>
<a name="ln144">    M_CANT_SPAWN        = BIT(46),</a>
<a name="ln145"> </a>
<a name="ln146">    /// derived undead can't be randomly generated</a>
<a name="ln147">    M_NO_GEN_DERIVED    = BIT(47),</a>
<a name="ln148"> </a>
<a name="ln149">                        //BIT(48),</a>
<a name="ln150"> </a>
<a name="ln151">    /// hybridized monster composed of other monster parts</a>
<a name="ln152">    M_HYBRID            = BIT(49),</a>
<a name="ln153"> </a>
<a name="ln154">                        //BIT(50),</a>
<a name="ln155"> </a>
<a name="ln156">    /// monster is a projectile (just OOD right now)</a>
<a name="ln157">    M_PROJECTILE        = BIT(51),</a>
<a name="ln158"> </a>
<a name="ln159">    /// monster is an &quot;avatar&quot; (no independent attacks, only support)</a>
<a name="ln160">    M_AVATAR            = BIT(52),</a>
<a name="ln161"> </a>
<a name="ln162">                        //BIT(53),</a>
<a name="ln163"> </a>
<a name="ln164">    /// monster is a proxy for a charm/conjuration spell (ball lightning, etc.)</a>
<a name="ln165">    M_CONJURED          = BIT(54),</a>
<a name="ln166"> </a>
<a name="ln167">    /// monster will never harm the player</a>
<a name="ln168">    M_NO_THREAT         = BIT(55),</a>
<a name="ln169"> </a>
<a name="ln170">    /// monster always receives a wand</a>
<a name="ln171">    M_ALWAYS_WAND       = BIT(56),</a>
<a name="ln172"> </a>
<a name="ln173">    /// uses they/them pronouns</a>
<a name="ln174">    M_GENDER_NEUTRAL    = BIT(57),</a>
<a name="ln175">};</a>
<a name="ln176">DEF_BITFIELD(monclass_flags_t, monclass_flag_type);</a>
<a name="ln177"> </a>
<a name="ln178">/// Properties of specific monsters.</a>
<a name="ln179">enum monster_flag_type : uint64_t</a>
<a name="ln180">{</a>
<a name="ln181">    MF_NO_FLAGS           = 0,</a>
<a name="ln182">    /// no benefit from killing</a>
<a name="ln183">    MF_NO_REWARD          = BIT(0),</a>
<a name="ln184">    /// monster skips next available action</a>
<a name="ln185">    MF_JUST_SUMMONED      = BIT(1),</a>
<a name="ln186">    /// is following player through stairs</a>
<a name="ln187">    MF_TAKING_STAIRS      = BIT(2),</a>
<a name="ln188"> </a>
<a name="ln189">    //                      BIT(3),</a>
<a name="ln190"> </a>
<a name="ln191">    /// Player has already seen monster</a>
<a name="ln192">    MF_SEEN               = BIT(4),</a>
<a name="ln193">    /// A known shapeshifter.</a>
<a name="ln194">    MF_KNOWN_SHIFTER      = BIT(5),</a>
<a name="ln195">    /// Monster that has been banished.</a>
<a name="ln196">    MF_BANISHED           = BIT(6),</a>
<a name="ln197"> </a>
<a name="ln198">    /// Summoned, should not drop gear on reset</a>
<a name="ln199">    MF_HARD_RESET         = BIT(7),</a>
<a name="ln200">    /// mirror to CREATED_FRIENDLY for neutrals</a>
<a name="ln201">    MF_WAS_NEUTRAL        = BIT(8),</a>
<a name="ln202">    /// Saw player and attitude changed (or not); currently used for holy</a>
<a name="ln203">    /// beings (good god worshippers -&gt; neutral) orcs (Beogh worshippers</a>
<a name="ln204">    /// -&gt; friendly), and slimes (Jiyva worshippers -&gt; neutral)</a>
<a name="ln205">    MF_ATT_CHANGE_ATTEMPT = BIT(9),</a>
<a name="ln206">    /// Was in view during previous turn.</a>
<a name="ln207">    MF_WAS_IN_VIEW        = BIT(10),</a>
<a name="ln208"> </a>
<a name="ln209">    /// Created as a member of a band</a>
<a name="ln210">    MF_BAND_MEMBER        = BIT(11),</a>
<a name="ln211">    /// Monter has been pacified</a>
<a name="ln212">    MF_PACIFIED           = BIT(12),</a>
<a name="ln213">    /// Consider this monster to have MH_UNDEAD holiness, regardless</a>
<a name="ln214">    /// of its actual type</a>
<a name="ln215">    MF_FAKE_UNDEAD        = BIT(13),</a>
<a name="ln216">    /// An undead monster soul enslaved by</a>
<a name="ln217">    /// Yredelemnul's power</a>
<a name="ln218">    MF_ENSLAVED_SOUL      = BIT(14),</a>
<a name="ln219"> </a>
<a name="ln220">    /// mname is a suffix.</a>
<a name="ln221">    MF_NAME_SUFFIX        = BIT(15),</a>
<a name="ln222">    /// mname is an adjective (prefix).</a>
<a name="ln223">    MF_NAME_ADJECTIVE     = BIT(16),</a>
<a name="ln224">    /// mname entirely replaces normal monster name.</a>
<a name="ln225">    MF_NAME_REPLACE       = MF_NAME_SUFFIX|MF_NAME_ADJECTIVE,</a>
<a name="ln226">    /// Is a god gift.</a>
<a name="ln227">    MF_GOD_GIFT           = BIT(17),</a>
<a name="ln228">    /// Is running away from player sanctuary</a>
<a name="ln229">    MF_FLEEING_FROM_SANCTUARY = BIT(18),</a>
<a name="ln230">    /// Is being killed with disintegration</a>
<a name="ln231">    MF_EXPLODE_KILL       = BIT(19),</a>
<a name="ln232"> </a>
<a name="ln233">    // These are based on the flags in monster class, but can be set for</a>
<a name="ln234">    // monsters that are not normally fighters (in vaults).</a>
<a name="ln235"> </a>
<a name="ln236">    /// Monster is skilled fighter.</a>
<a name="ln237">    MF_FIGHTER            = BIT(20),</a>
<a name="ln238">    /// Monster wields two weapons.</a>
<a name="ln239">    MF_TWO_WEAPONS        = BIT(21),</a>
<a name="ln240">    /// Monster gets various archery boosts.</a>
<a name="ln241">    MF_ARCHER             = BIT(22),</a>
<a name="ln242"> </a>
<a name="ln243">                          //BIT(23),</a>
<a name="ln244">                          //BIT(24),</a>
<a name="ln245">                          //BIT(25),</a>
<a name="ln246"> </a>
<a name="ln247">    /// This monster cannot regenerate.</a>
<a name="ln248">    MF_NO_REGEN           = BIT(26),</a>
<a name="ln249"> </a>
<a name="ln250">    /// mname should be treated with normal grammar, ie, prevent</a>
<a name="ln251">    /// &quot;You hit red rat&quot; and other such constructs.</a>
<a name="ln252">    MF_NAME_DESCRIPTOR    = BIT(27),</a>
<a name="ln253">    /// give this monster the definite &quot;the&quot; article, instead of the</a>
<a name="ln254">    /// indefinite &quot;a&quot; article.</a>
<a name="ln255">    MF_NAME_DEFINITE      = BIT(28),</a>
<a name="ln256">    /// living monster revived by a lost soul</a>
<a name="ln257">    MF_SPECTRALISED       = BIT(29),</a>
<a name="ln258">    /// is a demonic_guardian</a>
<a name="ln259">    MF_DEMONIC_GUARDIAN   = BIT(30),</a>
<a name="ln260">    /// mname should be used for corpses as well</a>
<a name="ln261">    MF_NAME_SPECIES       = BIT(31),</a>
<a name="ln262">    /// mname replaces &quot;zombie&quot; etc.; use only for already zombified monsters</a>
<a name="ln263">    MF_NAME_ZOMBIE        = BIT(32),</a>
<a name="ln264">    /// Player has been warned about this monster being nearby.</a>
<a name="ln265">    MF_SENSED             = BIT(33),</a>
<a name="ln266">    /// mname should not be used for corpses</a>
<a name="ln267">    MF_NAME_NOCORPSE      = BIT(34),</a>
<a name="ln268">    /// known to have a ranged attack</a>
<a name="ln269">    MF_SEEN_RANGED        = BIT(35),</a>
<a name="ln270"> </a>
<a name="ln271">    /// this monster has been polymorphed.</a>
<a name="ln272">    MF_POLYMORPHED        = BIT(36),</a>
<a name="ln273">    /// just got hibernated/slept</a>
<a name="ln274">    MF_JUST_SLEPT         = BIT(37),</a>
<a name="ln275">    /// possibly got piety with TSO</a>
<a name="ln276">    MF_TSO_SEEN           = BIT(38),</a>
<a name="ln277">};</a>
<a name="ln278">DEF_BITFIELD(monster_flags_t, monster_flag_type);</a>
<a name="ln279"> </a>
<a name="ln280">constexpr monster_flags_t MF_NAME_MASK = MF_NAME_REPLACE;</a>
<a name="ln281">constexpr monster_flags_t MF_MELEE_MASK = MF_FIGHTER | MF_TWO_WEAPONS</a>
<a name="ln282">                                        | MF_ARCHER;</a>

</code></pre>
<div class="balloon" rel="280"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v1043/" target="_blank">V1043</a> A global object variable 'MF_NAME_MASK' is declared in the header. Multiple copies of it will be created in all translation units that include this header file.</p></div>
<div class="balloon" rel="281"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v1043/" target="_blank">V1043</a> A global object variable 'MF_MELEE_MASK' is declared in the header. Multiple copies of it will be created in all translation units that include this header file.</p></div>

<link rel="stylesheet" href="highlight.css">
<script src="highlight.pack.js"></script>
<script src="highlightjs-line-numbers.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
<script>hljs.initLineNumbersOnLoad();</script>
<script>
  $(document).ready(function() {
      $('.balloon').each(function () {
          var bl = $(this);
          var line = bl.attr('rel');
          var text = $('a[name="ln'+line+'"]').text();

          var space_count = 0;
          for(var i = 0; i<text.length; i++){
              var char = text[i];
              if((char !== ' ')&&(char !== '\t'))break;
              if(char === '\t')space_count++;
              space_count++;
          }

          bl.css('margin-left', space_count*8);
          $('a[name="ln'+line+'"]').after(bl);
      });

      window.location = window.location;
  });
</script>
</body>
</html>
